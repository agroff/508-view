{"version":3,"sources":["webpack://508-view/webpack/universalModuleDefinition","webpack://508-view/webpack/bootstrap","webpack://508-view/./src/BaseFeature.js","webpack://508-view/./src/index.js","webpack://508-view/./src/features/DisplayAriaVisible.js","webpack://508-view/./src/features/DisplayImageAltTags.js","webpack://508-view/./src/features/StyleHelper.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","BaseFeature","config","_classCallCheck","this","featureName","optionName","rulesArray","style","document","createElement","appendChild","createTextNode","head","forEach","rule","sheet","insertRule","optionEnabled","console","error","_DisplayAriaVisible","_interopRequireDefault","_DisplayImageAltTags","_StyleHelper","ScreenReaderView","arguments","length","undefined","assign","display-aria-visible","highlight-aria-invisible","hide-visual-elements","display-image-alts","display-missing-image-alts","display-sr-only","use-helper-styles","enable-via-url","url-parameter","body-class","parameterValue","URL","location","searchParams","cssClass","body","classList","add","isEnabled","addClass","displayAriaVisible","default","displayImageAltTags","styleHelper","run","_BaseFeature2","DisplayAriaVisible","_this","_possibleConstructorReturn","__proto__","getPrototypeOf","skipTags","_this2","querySelectorAll","element","indexOf","tagName","display","getComputedStyle","getPropertyValue","isAriaHidden","hasAttribute","getAttribute","e","label","className","log","DisplayImageAltTags","image","appendClass","alt","isBroken","parentNode","displayMissing","innerHTML","warn","writeStyleSheet","appendAltTag","writeAltTagStyles","generateAltTags","StyleHelper","hideVisualElements","showSrOnly","writeHelperStyles","highlightAriaInvisible"],"mappings":"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","file":"508-view.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"508-view\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"508-view\"] = factory();\n\telse\n\t\troot[\"508-view\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","export default class BaseFeature{\n    constructor(config){\n        this.config = config;\n\n        this.featureName = \"\";\n    }\n\n    optionEnabled(optionName){\n        return this.config[optionName] === true;\n    }\n\n    writeStyleSheet(rulesArray){\n        const style = document.createElement(\"style\");\n\n        // WebKit hack\n        style.appendChild(document.createTextNode(\"\"));\n\n        // Add the <style> element to the page\n        document.head.appendChild(style);\n\n        rulesArray.forEach((rule) => {\n            style.sheet.insertRule(rule);\n        });\n    }\n\n    isEnabled(){\n        return this.optionEnabled(this.featureName);\n    }\n\n    run(){\n        console.error(\"BaseFeature.run is an abstract method. Please implement it.\");\n    }\n}\n","import DisplayAriaVisible from \"./features/DisplayAriaVisible\";\nimport DisplayImageAltTags from \"./features/DisplayImageAltTags\";\nimport StyleHelper from \"./features/StyleHelper\";\n\n\nexport default class ScreenReaderView {\n\n    constructor(config = {}) {\n        this.config = Object.assign({\n            \"display-aria-visible\"       : true,\n            \"highlight-aria-invisible\"   : true,\n            \"hide-visual-elements\"       : true,\n            \"display-image-alts\"         : true,\n            \"display-missing-image-alts\" : true,\n            \"display-sr-only\"            : true,\n            \"use-helper-styles\"          : true,\n            \"enable-via-url\"             : true,\n            \"url-parameter\"              : \"508\",\n            \"body-class\"                 : \"test-508\",\n        }, config);\n    }\n\n    isEnabled(){\n        const url = new URL(window.location);\n        const parameterValue = url.searchParams.get(this.config[\"url-parameter\"]);\n\n        if(this.config[\"enable-via-url\"] !== true){\n            return true;\n        }\n\n        if(parameterValue){\n            return true;\n        }\n\n        return false;\n    }\n\n    addClass(){\n        const cssClass = this.config[\"body-class\"];\n        document.body.classList.add(cssClass);\n    }\n\n    run(){\n\n        if(!this.isEnabled()){\n            return;\n        }\n\n        this.addClass();\n\n        //load all features\n        let displayAriaVisible = new DisplayAriaVisible(this.config);\n        let displayImageAltTags = new DisplayImageAltTags(this.config);\n        let styleHelper = new StyleHelper(this.config);\n\n        //run all features\n        displayAriaVisible.run();\n        displayImageAltTags.run();\n        styleHelper.run();\n    }\n\n}\n","import BaseFeature from \"../BaseFeature\";\n\nexport default class DisplayAriaVisible extends BaseFeature {\n    constructor(config) {\n        super(config);\n\n        this.featureName = 'display-aria-visible';\n\n        this.skipTags = [\n            \"HEAD\",\n            \"STYLE\",\n            \"META\",\n            \"TITLE\",\n            \"SCRIPT\",\n            \"LINK\"\n        ];\n    }\n\n    run() {\n        if(!this.isEnabled()){\n            return;\n        }\n\n        const displayIfAriaVisible = (element) => {\n            if (this.skipTags.indexOf(element.tagName) !== -1) {\n                return;\n            }\n\n            const display = window.getComputedStyle(element, null).getPropertyValue('display');\n            const hasAria = element.hasAttribute(\"aria-hidden\");\n\n            let isAriaHidden = false;\n            if (hasAria && element.getAttribute(\"aria-hidden\") === \"true\") {\n                isAriaHidden = true;\n            }\n\n            if (display === \"none\" && isAriaHidden === false) {\n                const e = element;\n                const label = e.tagName + '#' + e.getAttribute(\"id\") + '.' + e.className;\n\n                element.style.display = \"block\";\n                console.log(\"Needs Aria Hidden: \" + label);\n            }\n        };\n\n        document.querySelectorAll(\"*\").forEach(displayIfAriaVisible);\n    }\n}\n","import BaseFeature from \"../BaseFeature\";\n\nexport default class DisplayImageAltTags extends BaseFeature {\n    constructor(config) {\n        super(config);\n\n        this.featureName = 'display-image-alts';\n    }\n\n    appendAltTag(image, appendClass) {\n        let cssClass = image.className + ' ' + appendClass;\n        let alt      = image.getAttribute(\"alt\");\n        let isBroken = false;\n\n        if (image.hasAttribute('aria-hidden')) {\n            return;\n        }\n\n        if (!alt) {\n            cssClass += ' broken';\n            alt      = \"Missing Alt!\";\n            isBroken = true;\n        }\n\n        if (!image.parentNode) {\n            console.warn(\"Couldn't find parent node for image\", image);\n            return;\n        }\n\n        if (isBroken && !this.displayMissing) {\n            return;\n        }\n\n        image.parentNode.innerHTML = '<div class=\"' + cssClass + '\">' + alt + '</div>' + image.parentNode.innerHTML;\n    }\n\n    writeAltTagStyles() {\n        this.writeStyleSheet([\n            `\n            div.alt-tag{\n                position: relative;\n                z-index:5;\n                text-align: center;\n                font-size: 18px;\n                border: 1px solid green;\n                background-color: #91ff9169 !important;\n                color: #000;\n                padding: 20px;\n                margin-top: 20px;\n                margin-bottom: -100px;\n            }\n            `,\n            `\n            div.alt-tag.broken{\n                border: 1px solid #800006;\n                background-color: rgba(255, 102, 104, 0.47) !important;\n            }\n            `\n        ]);\n    }\n\n    generateAltTags() {\n        document.querySelectorAll(\"img\").forEach((image) => {\n            this.appendAltTag(image, 'alt-tag');\n        });\n    }\n\n    run() {\n        if (!this.isEnabled()) {\n            return;\n        }\n\n        this.displayMissing = this.optionEnabled('display-missing-image-alts');\n\n        this.writeAltTagStyles();\n\n        this.generateAltTags();\n    }\n}\n","import BaseFeature from \"../BaseFeature\";\n\nexport default class StyleHelper extends BaseFeature {\n    constructor(config) {\n        super(config);\n\n        this.featureName = '';\n    }\n\n    showSrOnly(){\n        this.writeStyleSheet([`\n        span.sr-only,\n        .sr-only{\n            position:relative !important;\n            border:1px solid #0017ff !important;\n            background-color: #9594ff !important;\n            height: auto !important;\n            width:auto !important;\n            clip:auto !important;\n            overflow:visible !important;\n            font-family: arial;\n            font-size:18px;\n            color:#000;\n        }\n        `]);\n    }\n\n    hideVisualElements() {\n        this.writeStyleSheet([`\n        img,canvas,video{\n            opacity : 0 !important;\n        }\n        `,`\n        *{\n            background-image: none !important;\n        }\n        `\n        ])\n    }\n\n    highlightAriaInvisible(){\n        this.writeStyleSheet([`\n        [aria-hidden=\"true\"]{\n            outline:10px solid red;\n        }\n        `]);\n    }\n\n    writeHelperStyles(){\n        this.writeStyleSheet([`\n        *{\n            color:#333 !important;\n            font-family:\"Helvetica Neue\", Helvetica, Roboto, Arial, sans-serif !important;\n            background-image: none !important;\n            background-color:#eee !important;\n        }\n        `,`\n        a.btn,\n        a[href],\n        a[href]:hover,\n        a.button{\n            background-color: yellow !important;\n            color:black;\n        }\n        `,`\n        *:focus {\n            outline: 7px solid pink;\n        }\n        `\n\n\n        ]);\n    }\n\n    run() {\n        if (this.optionEnabled('hide-visual-elements')) {\n            this.hideVisualElements();\n        }\n\n        if (this.optionEnabled('display-sr-only')) {\n            this.showSrOnly();\n        }\n        if (this.optionEnabled('use-helper-styles')) {\n            this.writeHelperStyles();\n        }\n        if (this.optionEnabled('highlight-aria-invisible')) {\n            this.highlightAriaInvisible();\n        }\n\n        //run the feature\n    }\n}\n"],"sourceRoot":""}